function fireworks(t){(t=t||{}).opacity=t.opacity||1,t.width,t.height;var i=t.dom,h=[],a=[],r=t.width,l=t.height,n=document.createElement("canvas");n.id="fireworksField",n.width=r,n.height=l,n.style.width=r+"px",n.style.height=l+"px",n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.opacity=t.opacity;var p=n.getContext("2d");function d(t){this.pos={x:t?t.x:0,y:t?t.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=0}function s(t){d.apply(this,[{x:t,y:l-Math.random()*l/4}]),this.explosionColor=0}d.prototype.update=function(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.size*=this.shrink,this.alpha-=this.fade},d.prototype.render=function(t){var i,s,e,o;this.exists()&&(t.save(),t.globalCompositeOperation="lighter",i=this.pos.x,s=this.pos.y,e=this.size/2,(o=t.createRadialGradient(i,s,.1,i,s,e)).addColorStop(.1,"rgba(255,255,255,"+this.alpha+")"),o.addColorStop(.8,"hsla("+this.color+", 100%, 50%, "+this.alpha+")"),o.addColorStop(1,"hsla("+this.color+", 100%, 50%, 0.1)"),t.fillStyle=o,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size:this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore())},d.prototype.exists=function(){return.1<=this.alpha&&1<=this.size},((s.prototype=new d).constructor=s).prototype.explode=function(){for(var t=10*Math.random()+80,i=0;i<t;i++){var s=new d(this.pos),e=Math.random()*Math.PI*2,o=15*Math.cos(Math.random()*Math.PI/2);s.vel.x=Math.cos(e)*o,s.vel.y=Math.sin(e)*o,s.size=10,s.gravity=.2,s.resistance=.92,s.shrink=.05*Math.random()+.93,s.flick=!0,s.color=this.explosionColor,h.push(s)}},s.prototype.render=function(t){var i,s,e,o;this.exists()&&(t.save(),t.globalCompositeOperation="lighter",i=this.pos.x,s=this.pos.y,e=this.size/2,(o=t.createRadialGradient(i,s,.1,i,s,e)).addColorStop(.1,"rgba(255, 255, 255 ,"+this.alpha+")"),o.addColorStop(1,"rgba(0, 0, 0, "+this.alpha+")"),t.fillStyle=o,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size/2+this.size/2:this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore())};return i.appendChild(n),setInterval(function(){var t,i;t=Math.random()*r,a.length<10&&((i=new s(t)).explosionColor=10*Math.floor(360*Math.random()/10),i.vel.y=-6*Math.random()-5,i.vel.x=2*Math.random()-1,i.size=8,i.shrink=.999,i.gravity=.03,a.push(i))},50),setInterval(function(){r!=window.innerWidth&&(n.width=r=window.innerWidth),l!=window.innerHeight&&(n.height=l=window.innerHeight),p.fillStyle="rgba(0, 0, 0, 0.07)",p.fillRect(0,0,r,l);for(var t=[],i=0;i<a.length;i++){a[i].update(),a[i].render(p);var s=Math.sqrt(Math.pow(r-a[i].pos.x,2)+Math.pow(l-a[i].pos.y,2)),e=a[i].pos.y<2*l/3&&100*Math.random()<=1;a[i].pos.y<l/5||0<=a[i].vel.y||s<50||e?a[i].explode():t.push(a[i])}a=t;for(var o=[],i=0;i<h.length;i++)h[i].update(),h[i].exists()&&(h[i].render(p),o.push(h[i]));for(h=o;400<h.length;)h.shift()},20),i}